# CreateConf

# Requires Nick Burrett's SCL header files and gststubs
# (although Nick's stubs would do)

# Expects OSLib to be on C$Path

GCCflags	= -c -O2 -mstubs -mthrowback -IOS: -D__swi
Linkflags	= -aif -o $@
ASflags		= -gcc -objasm -throwback

Libraries	= C:o.gststubs gcc:o.libgcc

# Target

All:		CreateConf ConfigScan MakeMenus

CreateConf:	o.CreateConf $(Libraries)
		drlink $(Linkflags) CreateConf o.CreateConf C:o.OSLib $(Libraries)

ConfigScan:	o.ConfigScan
		drlink $(Linkflags) ConfigScan o.ConfigScan

MakeMenus:	o.MakeMenus
		drlink $(Linkflags) MakeMenus o.MakeMenus $(Libraries)

# Dependencies
o.CreateConf:	c.CreateConf h.stdarg C:h.kernel OS:h.osfile OS:h.types OS:h.os OS:h.fileswitch OS:h.osgbpb
	gcc $(GCCflags) $(DEBUG) c.CreateConf

o.ConfigScan:	s.ConfigScan
	as $(ASflags) s.ConfigScan

o.MakeMenus:	c.MakeMenus h.stdarg C:h.stdio C:h.stdlib C:h.string C:h.ctype C:h.time
	gcc $(GCCflags) $(DEBUG) c.CreateConf

